
## 1. 🎭 액터 정의 (Actor Definitions)

| 액터         | 역할                                |
| ---------- | --------------------------------- |
| **HR 관리자** | 입사자 등록, 진행 상태 모니터링, 메일 발송 자동화 트리거 |
| **신규 입사자** | 개인/보험/건강검진 정보 기입, 온보딩 피드백 제출      |
| **시스템**    | 자동 알림, Webhook 전송, 일정 기반 트리거 처리   |

---

## 2. 📌 주요 시나리오 (Use Case Scenarios)

1. 신규 입사자 등록
2. 부서별 메일 자동 발송
3. 출근 안내 메일 발송
4. 자기기입 정보 입력 및 제출
5. 시용 평가 자동 리마인드
6. 상태/통계 대시보드 확인

---

## 3. 🧭 주요 흐름 (Main Steps)

### \[UC1] 신규 입사자 등록

**주체:** HR 관리자
**흐름:**

1. “신규입사자 등록” 화면 접속
2. 필수 정보 입력: 이름, 부서, 부서장, 직급, 직책, 입사일, 연락처, 시용기간
3. 저장 클릭 → Supabase에 행 추가
4. 대시보드 자동 갱신 → 상태: “개인정보 대기 중”

**Verification:** 대시보드에 신규 항목이 반영되고 상태가 ‘대기 중’으로 표시됨

---

### \[UC2] 부서별 입사자 안내 메일 발송

**주체:** HR 관리자
**흐름:**

1. 입사자 상세 페이지 접속
2. “부서에 전송” 클릭
3. 시스템이 Make.com Webhook에 JSON 전송
4. 인재개발팀 / 정보보안팀 / 디자인팀 / 인프라운영팀에 이메일 발송
5. 로그에 “부서 메일 발송 완료” 항목 기록

**Verification:** Make.com 응답 수신 확인 후 UI 로그에 성공 메시지 출력

---

### \[UC3] 출근 안내 메일 발송

**주체:** HR 관리자
**흐름:**

1. “출근 안내 전송” 버튼 클릭
2. 시스템이 Make.com에 Webhook POST 요청
3. 신규 입사자에게 첫 출근 장소/시간/준비물 안내 메일 발송
4. 상태 플래그 “안내 완료”로 변경

**Verification:** UI에 상태 뱃지 '발송됨' 표시

---

### \[UC4] 자기기입 정보 입력

**주체:** 신규 입사자
**흐름:**

1. 자기기입 메뉴 접속
2. 보험 대상자 정보 입력 (직계가족 이름/주민번호/관계)
3. 건강검진 병원 및 날짜 선택
4. 온보딩 설문(장점/불편한 점) 입력
5. 제출 → Supabase 행 업데이트
6. 시스템이 보험사, 병원에 Webhook 전송

**Verification:** 입력 항목 저장 완료 메시지 및 “제출 완료” 상태 표시

---

### \[UC5] 시용 평가 리마인더

**주체:** 시스템
**흐름:**

1. T = 입사일 + 90일 시점 도달
2. Make.com에 Webhook 전송
3. 부서장에게 시용 평가 요청 메일 자동 발송

**Verification:** 로그에 “시용 평가 리마인더 발송됨” 기록

---

### \[UC6] 진행 상태 및 통계 확인

**주체:** HR 관리자
**흐름:**

1. 대시보드 접속
2. 입사자별 완료율 (%) 확인
3. 전체 상태 분포 (막대/파이 차트) 확인
4. 설문 응답 분석 확인

**Verification:** 대시보드 시각화가 실시간 상태와 일치

---

## 4. ⚠ 예외 처리 (Exception Handling)

| 조건                    | 시스템 동작                              |
| --------------------- | ----------------------------------- |
| 동일한 입사자 정보가 이미 존재     | “기존 항목 덮어쓰기 또는 병합” 옵션 표시            |
| 입사일이 과거 날짜로 입력됨       | 입력폼 하단에 인라인 오류 메시지 표시               |
| Webhook 타임아웃 발생       | 3회 재시도 (지수적 백오프 적용), 실패 시 관리자 경고 표시 |
| 입사자 정보 미제출 상태 T+7일 초과 | 자동 리마인더 이메일 발송 (Make.com 통해)        |

---

## 5. ⛳ 사전 조건 / 사후 조건 (Preconditions / Postconditions)

### ▶ UC1\~3 (HR 측)

* **사전 조건:** VPN/IP 화이트리스트 환경에서 접속
* **사후 조건:** 상태 변경, 로그 생성, Webhook 호출 완료

### ▶ UC4 (입사자 측)

* **사전 조건:** HR이 등록한 입사자여야 자기기입 접근 가능
* **사후 조건:** 입력 데이터 저장됨, 병원/보험사에 Webhook 호출됨

---

## 6. 📜 비즈니스 규칙 및 제약 조건 (Business Rules & Constraints)

* 사용자 인증 없음 → 내부 네트워크 제한 (VPN/IP 기반)
* 모든 PII는 Supabase에 저장, Row-Level Security 적용
* 모든 외부 요청은 HTTPS 사용, 실패 시 재시도 포함
* 시스템 로그는 1년간 보관 (감사 용도)

---

## 7. 🔄 데이터 흐름 및 구조 (Data Requirements & Flow)

| 항목         | 설명                               |
| ---------- | -------------------------------- |
| 신규입사자 기본정보 | Supabase 테이블에 저장 (입사일, 직급 등 포함)  |
| 자기기입 입력값   | 보험대상자, 병원 선택, 설문 응답 등            |
| 메일 발송 로그   | Webhook 성공 여부 및 타임스탬프 기록         |
| 통계 데이터     | 완료율, 설문 피드백, 처리 소요시간 등 분석용으로 조회됨 |

---

## 8. 🔐 보안 및 개인정보 고려사항 (Security & Privacy Considerations)

* 민감정보는 암호화 전송(TLS) 및 저장 (Supabase 표준 적용)
* 입력 접근은 사내망 한정, 외부 접근 차단
* 입사자별 접근 제한: 자기기입 화면은 사전 등록자만 접근 가능
* Webhook 요청은 인증 헤더 포함, 무단 호출 방지

---

## 9. 🖼 UI 고려사항 (UI Considerations)

| 요소                   | 설명                                 |
| -------------------- | ---------------------------------- |
| 진행 상태 뱃지             | “대기 중 / 완료 / 미제출 7일 초과” 등 시각 상태 표현 |
| Step-by-step 자기기입 UI | 보험 → 병원 → 설문 흐름 순차적 이동             |
| 메일 발송 버튼             | 부서별 드롭다운 + 전송 상태 확인가능 토스트 메시지      |
| 실패 시 안내              | 에러 알림/재시도 권장 안내 포함                 |
| 모바일 대응               | 자기기입 화면은 태블릿/모바일 사용성 보장 (터치 최적화)   |


